http://zhengruioi.com/contest/764/problem/1695

给定一二叉树，每个点初始黑或白色，两种操作：一：将简单路径上的点全部翻转；二：将子树内的点全部翻转；且前者不能有点相交，求最少操作次数使得树变为纯色

不能有点相交意味着每个点最多从子树中保留一条路径等待和更上面的点构成简单路径，所以令$dp[i][0/1][0/1]$表示以$i$为根的子树中，第二维记录颜色，第三维$0$表示子树是纯色，$1$表示有一条路径是反色

对于纯色子树，如果要求其颜色与根不一样：

①两棵子树与根颜色相同，最后用操作二

②两棵子树与要求颜色相同，根单独用操作一

③选一棵子树留一条和根颜色相同的路径，另一棵子树与要求颜色相同，用操作一

④两棵子树都留和根颜色相同的路径，用操作一

纯色子树之间用操作二转化

对于留一条路径的情况，如果路径保留颜色与根相同，其余点为其余颜色：

①选一棵子树留一条和根颜色相同的路径，另一棵子树保持其余颜色

②两棵子树均保持其余颜色，根单独作为保留颜色



http://codeforces.com/contest/1447/problem/D

给定两个字符串$a,b$，从中各选一个子串$c,d$，最大化$4\times LCS(c,d)-|c|-|d|$

奇怪的值可以用dp维护，$dp[i][j]$表示以$a[i],b[j]$为结尾的最大值，$dp[i][j]=max(dp[i-1][j]-1,dp[i][j-1]-1,0,[a[i]==b[j]]\times (dp[i-1][j-1]+4-2))$



http://zhengruioi.com/contest/771/problem/1697

一个序列初始只有一个$1$，给定其可能最大值$M$，每次有两种操作，一：在序列末尾插入$1$或$M$；二：选择一个非开头和末尾的位置$i$，插入一个$x$，$a_i<x<a_{i+1}$或$a_i>x>a_{i+1}$

先考虑最终序列的种类数，再计算能完成该序列的方案数

将序列中关键值$1,m$拉出来构成一条链，两个关键值之间的其他点都连在后一个关键值上，只要两个关键值不同，中间就可以插入若干点

能完成该序列的方案数就是树的拓扑序数量，考虑若没有限制是$n!$种，考虑以$i$为根的子树大小为$siz[i]$，则对该$siz[i]$个数来说有限制：拓扑序中$i$必须在其余点之前出现，于是相对于全排列，只有$\frac{1}{siz[i]}$种方案满足条件，考虑所有子树，只有$\frac{n!}{\prod siz[i]}$种满足条件

设$dp[i]$表示用了$i$个元素的方案数，每次考虑插入一个关键值和$j$个点其余值：$dp[i]=dp[i-1]\times \frac{1}{n-(i-1)}+\sum\limits_{j=1}^{i-1} dp[i-j]\times \binom{m-2}{j} \times \frac{1}{n-(i-j)}$



http://zhengruioi.com/contest/454/problem/1018

给定若干十进制下的分数，求一进制$k$使得所有分数在该进制下都是有限位小数

考虑一定存在$m$，使得任意$k$进制下的有限位小数$c\times k^m$为整数，设分数$\frac{a}{b}=c$，两边同乘$k^m$次方后应该都是整数，所以一定有$b|k^m$，由于$m$可以很大，所以只需要要求$k$中含有所有分母的质因子即可(约分后的)