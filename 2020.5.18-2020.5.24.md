https://atcoder.jp/contests/tdpc/tasks/tdpc_string

求有多少种字符串，其中$a,b,c...z$分别出现了$f[1],f[2]...f[26]$次，并且任意两个相邻字符不同

对答案串$dp$，与放入顺序无关，所以$dp[i][j]$表示放入前$i$种的所有字母后，存在$j$个不合法间隔，的方案数

对于字母$"c"$，如果一个一个放进去，不好说它是否打破or增加了不合法间隔，所以我们把所有的$"c"$分成$good+bad$组，其中$good$段插到合法间隔，$bad$段插到不合法间隔，最后再用插板法讨论一下把$a["c"]$个元素分成$good+bad$组的方案数，可得方程：$dp[i][j-bad+a[i]-good-bad]+=dp[i-1][j]\times C[j][bad]\times C[sum+1-j][good]\times C[a[i]-1][good+bad-1]$

https://www.luogu.com.cn/problem/P5424

一列数$a$，初始在$1$，自选一数$c$，且在向后走的过程中可以改变$k$次该数，走到每一个点的代价是$c-a[i]$（必须$\geq 0$），且代价之和最小；

每次决策一段$c$不变的区间，就是序列上的分段dp，$dp[i][j]$表示走到第$i$位，已经用了$j$次改变的最小代价，枚举上一次改变的点进行转移：$dp[i][0]=max\{a[1],a[2]...a[i]\}\times i-sum[i]$；$dp[i][j]=min\{dp[i][k],max\{a[k+1],a[k+2]...a[i]\}\times (i-k)-(sum[i]-sum[k])\}$，其中区间最值可以用ST表预处理

https://loj.ac/problem/520

给定一完全图，$dis<u,v>=(w_u-w_v)^2$，求一回路$C$使每个点经过恰好一次，且经过边权之和最小；

顺序无关，先根据$w_i$递增排序

性质1：存在最优解$C$，使得$C$中从点$1$到点$n$的部分经过的点编号递增，从点$n$到点$1$的部分经过的点编号递减。

因为对于$1->n$路径上经过的$i-1,i,i+1$，$(i-1,i+1)$边总可以拆成$(i-1,i)$和$(i,i+1)$，所以只需决策出点属于$A:1->n$还是属于$B:n->1$即可，实际上$A,B$就是两条起点，终点一样的，且中间点都不一样的路径

据此得到$70pts$做法：$dp[i][j]$表示已经安排好了$1-j$的所属，靠后的路径最后一位到$1-j$，靠前的路径最后一位到$1-i$，在此情况下合理安排成$1-n$ ，$1-n$还要花费的最小代价，$dp[i][n]=(w_n-w_i)^2$，$dp[i][j]=min(dp[i][j+1]+(w_{j+1}-w_j)^2,dp[j][j+1]+(w_{j+1}-w_i)^2)$

性质2：对于$i=2,3...n-2$，$i,i+1$不同时属于同一条路径，$p<i\ ,\ 1>i+1$则可以把$(p,q)(i,i+1)$换成$(p,i+1)(i,q)$

据此得到$100pts$做法：连接$(1,2)(n-1,n)$和所有$(i,i+2)$



